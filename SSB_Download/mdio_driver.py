#MDIO Driver File
from etc_mdio_lib import *
from etc_mdio_lib.etc_mdio_header import *
from etc_mdio_lib.etc_mdio_func import *
from etc_uart import *
import time

#Enable this flag to download gphy firmware
enable_gphy_firmware_download = True

dev=BB_MDIO(0)
dev.DevConf(BAUD,DO_MASK_VAL,SYNC_MODE)

if enable_gphy_firmware_download == True:
	Download_Gphy_firmware(dev,MDIO_ADDR)
'''
enable_pie_insertion_extraction(dev)
dataToSend =[]
ipv6_packet = [0x8155,0x8155,0x8155,0x8155,0x8155,0x8155,0x8155,0x81d5,0x81f4,0x8100,0x81da,0x815b,0x8120,0x8131 ,0x81be ,0x81a1,0x8179,0x811c,0x8100,0x81d9 ,0x8186,0x81dd,0x816d,0x815d,0x81f8,0x818c,0x8100,0x8112,0x813c,0x8113,0x813d,0x81a5,0x811d,0x8173,0x813a,0x8117,0x8135,0x815a,0x81bf,0x8191,0x81ae,0x81bc,0x8160,0x81aa,0x81bf,0x81c0,0x8198,0x81ce,0x81e0,0x818d,0x8148,0x816b,0x81e1,0x8157 ,0x81a7,0x8198,0x81ea,0x8177,0x8122 ,0x81bc,0x8148,0x81b5,0x8102,0x8100,0x8157,0x811b,0x812d,0x8102,0x81a6,0x810d,0x8172,0x81ee,0x81be,0x81a1,0x810d,0x811e,0x8131,0x81fd,0x8145,0x81e8,0x819e,0x811b,0x81ae,0x8131]
#Send IPG Packet
for i in range(12):
	dataToSend += 0x8000,

	#Send Data
for i in range(len(ipv6_packet)):
	dataToSend += ipv6_packet[i],
	
#Send IPG Packet
for i in range(12):
	dataToSend += 0x8000,

for i in range(len(dataToSend)):
	etc_pdi_write(dev,0xF140,0x00,dataToSend[i])
'''